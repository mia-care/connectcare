{
  "integrations": [
    {
      "source": {
        "type": "jira",
        "authentication": {
          "secret": {
            "fromEnv": "JIRA_WEBHOOK_SECRET"
          }
        }
      },
      "pipelines": [
        {
          "processors": [
            {
              "type": "filter",
              "celExpression": "eventType == 'jira:issue_created' || eventType == 'jira:issue_updated'"
            }
          ],
          "sinks": [
            {
              "type": "mongo",
              "url": {
                "fromEnv": "MONGO_URL"
              },
              "collection": "events"
            }
          ]
        },
        {
          "processors": [
            {
              "type": "filter",
              "celExpression": "eventType == 'jira:version_released'"
            },
            {
              "type": "mapper",
              "outputEvent": {
                "versionName": "{{ version.name }}",
                "projectId": "{{ version.projectId }}",
                "released": "{{ version.released }}"
              }
            }
          ],
          "sinks": [
            {
              "type": "mongo",
              "url": {
                "fromEnv": "MONGO_URL"
              },
              "collection": "events"
            }
          ]
        }
      ]
    }
  ]
}
